{# templates/sales/base_sales.html #}
{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "نظام إدارة المبيعات" %}{% endblock %}

{% block content %}
<div class="container-fluid">

  {# === رأس قسم المبيعات + الناف === #}
  <div class="mb-4">

    {# عنوان القسم الرئيسي #}
    <div class="d-flex justify-content-between align-items-start mb-3">
      <div>
        <h1 class="h3 fw-bold mb-1 text-body">
          {% trans "نظام إدارة المبيعات" %}
        </h1>
        <p class="text-secondary small mb-0">
          {% trans "إدارة عروض الأسعار، أوامر البيع، ومذكرات التسليم ضمن منصة Mazoon ERP." %}
        </p>
      </div>
    </div>

    {# كرت يحتوي على الناف والوصف #}
    <div class="card border-0 shadow-sm">
      <div class="card-body pb-2">

        {# شريط تبويبات المبيعات #}
        <ul class="nav nav-pills bg-body-tertiary p-2 rounded-3 mb-2 flex-wrap gap-1">

          {# --- لوحة التحكم --- #}
          <li class="nav-item">
            <a class="nav-link px-3 py-1 {% if sales_section == 'dashboard' %}active{% endif %}"
               href="{% url 'sales:dashboard' %}">
              {% trans "لوحة التحكم" %}
            </a>
          </li>

          {# --- جهات الاتصال --- #}
          <li class="nav-item">
            <a class="nav-link px-3 py-1 {% if sales_section == 'contacts' %}active{% endif %}"
               href="{% url 'contacts:contact_list' %}">
              {% trans "جهات الاتصال" %}
            </a>
          </li>

          {# --- مستندات المبيعات (عروض + أوامر) --- #}
          <li class="nav-item">
            <a class="nav-link px-3 py-1 {% if sales_section == 'sales_list' or sales_section == 'sales_create' or sales_section == 'sales_edit' or sales_section == 'sales_detail' %}active{% endif %}"
               href="{% url 'sales:sales_list' %}">
              {% trans "مستندات المبيعات" %}
            </a>
          </li>

          {# --- مذكرات التسليم --- #}
          <li class="nav-item">
            <a class="nav-link px-3 py-1 {% if sales_section == 'deliveries' %}active{% endif %}"
               href="{% url 'sales:delivery_note_list' %}">
              {% trans "مذكرات التسليم" %}
            </a>
          </li>

        </ul>
      </div>

      {# وصف سياقي أسفل الناف #}
      <div class="card-footer bg-transparent border-0 pt-0">
        <div class="small text-secondary">
          {% if sales_section == 'dashboard' %}
            {% trans "نظرة عامة على مستندات المبيعات وحالة سير العمل." %}
          {% elif sales_section == 'sales_list' %}
            {% trans "قائمة بجميع مستندات المبيعات (عروض الأسعار وأوامر البيع)." %}
          {% elif sales_section == 'sales_create' %}
            {% trans "إنشاء مستند مبيعات جديد كعرض سعر أو أمر بيع." %}
          {% elif sales_section == 'sales_edit' or sales_section == 'sales_detail' %}
            {% trans "عرض وتعديل تفاصيل مستند المبيعات المختار." %}
          {% elif sales_section == 'deliveries' %}
            {% trans "إدارة مذكرات التسليم وربطها بأوامر البيع." %}
          {% elif sales_section == 'contacts' %}
            {% trans "إدارة جهات الاتصال المرتبطة بعمليات المبيعات." %}
          {% else %}
            {% trans "اختر إحدى الشاشات أعلاه لإدارة بيانات المبيعات." %}
          {% endif %}
        </div>
      </div>
    </div>

  </div>

  {# === محتوى الصفحات الفرعية === #}
  <div class="mt-3">
    {% block sales_content %}{% endblock %}
  </div>

</div>
{% endblock content %}
