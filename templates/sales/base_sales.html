{# templates/sales/base_sales.html #}
{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "نظام إدارة المبيعات" %}{% endblock %}

{% block content %}
<div class="container-fluid">

  {# === رأس قسم المبيعات + الناف === #}
  <div class="mb-3">

    <div class="d-flex justify-content-between align-items-center mb-2">
      <div>
        <h1 class="h3 fw-bold mb-1 text-mazoon">
          {% trans "نظام إدارة المبيعات" %}
        </h1>
        <p class="text-muted small mb-0">
          {% trans "إدارة عروض الأسعار، أوامر البيع، ومذكرات التسليم ضمن منصة Mazoon ERP." %}
        </p>
      </div>
    </div>

    <ul class="nav nav-pills mazoon-nav bg-mazoon-card p-2 rounded-3 shadow-sm mb-2">

      {# --- لوحة التحكم --- #}
      <li class="nav-item">
        <a class="nav-link px-3 py-1 {% if sales_section == 'dashboard' %}active{% endif %}"
           href="{% url 'sales:dashboard' %}">
          {% trans "لوحة التحكم" %}
        </a>
      </li>

      {# --- رابط جهات الاتصال --- #}
      <li class="nav-item">
        <a class="nav-link px-3 py-1 {% if sales_section == 'contacts' %}active{% endif %}"
           href="{% url 'contacts:contact_list' %}">
          {% trans "جهات الاتصال" %}
        </a>
      </li>

      {# --- مستندات المبيعات (قائمة موحدة) --- #}
      <li class="nav-item">
        <a class="nav-link px-3 py-1 {% if sales_section == 'sales_list' or sales_section == 'sales_create' or sales_section == 'sales_edit' or sales_section == 'sales_detail' %}active{% endif %}"
           href="{% url 'sales:sales_list' %}">
          {% trans "مستندات المبيعات" %}
        </a>
      </li>

      {# --- مذكرات التسليم --- #}
      <li class="nav-item">
        <a class="nav-link px-3 py-1 {% if sales_section == 'deliveries' %}active{% endif %}"
           href="{% url 'sales:delivery_note_list' %}">
          {% trans "مذكرات التسليم" %}
        </a>
      </li>

    </ul>

    <div class="mb-3">
      <p class="text-muted small mb-0">
        {% if sales_section == 'dashboard' %}
          {% trans "نظرة عامة على مستندات المبيعات وحالة سير العمل." %}
        {% elif sales_section == 'sales_list' %}
          {% trans "قائمة بجميع مستندات المبيعات (عروض الأسعار وأوامر البيع)." %}
        {% elif sales_section == 'sales_create' %}
          {% trans "إنشاء مستند مبيعات جديد كعرض سعر أو أمر بيع." %}
        {% elif sales_section == 'sales_edit' or sales_section == 'sales_detail' %}
          {% trans "عرض وتعديل تفاصيل مستند المبيعات المختار." %}
        {% elif sales_section == 'deliveries' %}
          {% trans "إدارة مذكرات التسليم وربطها بأوامر البيع." %}
        {% elif sales_section == 'contacts' %}
          {% trans "إدارة جهات الاتصال المرتبطة بعمليات المبيعات." %}
        {% else %}
          {% trans "اختر إحدى الشاشات أعلاه لإدارة بيانات المبيعات." %}
        {% endif %}
      </p>
    </div>

  </div>

  {# === محتوى الصفحات الفرعية === #}
  <div class="mt-3">
    {% block sales_content %}{% endblock %}
  </div>

</div>
{% endblock content %}
