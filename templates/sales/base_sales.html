{% extends "base.html" %}
{% load i18n static %}

{% block content %}

<div class="container-lg py-4">

  {# ======================= PAGE HEADER ======================= #}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <h1 class="h3 fw-bold text-dark mb-1">
          <i class="bi bi-shop text-primary me-2"></i>{% trans "نظام المبيعات" %}
      </h1>
      <p class="text-muted mb-0">
        {% trans "إدارة دورة المبيعات، من عروض الأسعار وحتى التسليم." %}
      </p>
    </div>
  </div>

  {# ======================= NAVIGATION BAR (Horizontal) ======================= #}
  <div class="mb-4">
    <div class="bg-body border rounded-3 shadow-sm px-2 py-2">
      <ul class="nav nav-pills flex-wrap small gap-1 align-items-center">

        {# 1. لوحة التحكم #}
        <li class="nav-item">
          <a class="nav-link px-3 py-1 {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}"
             href="{% url 'sales:dashboard' %}">
            <i class="bi bi-speedometer2 me-1"></i> {% trans "الرئيسية" %}
          </a>
        </li>

        {# 2. عروض الأسعار #}
        <li class="nav-item">
          <a class="nav-link px-3 py-1 {% if 'quotation' in request.path %}active{% endif %}"
             href="{% url 'sales:quotation_list' %}">
             {% trans "عروض الأسعار" %}
          </a>
        </li>

        {# 3. أوامر البيع #}
        <li class="nav-item">
          <a class="nav-link px-3 py-1 {% if 'orders' in request.path %}active{% endif %}"
             href="{% url 'sales:order_list' %}">
             {% trans "أوامر البيع" %}
          </a>
        </li>

        {# 4. مذكرات التسليم #}
        <li class="nav-item">
          <a class="nav-link px-3 py-1 {% if 'deliveries' in request.path %}active{% endif %}"
             href="{% url 'sales:delivery_list' %}">
             {% trans "مذكرات التسليم" %}
          </a>
        </li>

        <li class="border-start mx-2 d-none d-lg-block"></li>

        {# 5. روابط مستقبلية (معطلة) #}
        <li class="nav-item">
          <a class="nav-link px-3 py-1 disabled text-muted" href="#">
            {% trans "الفواتير" %}
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link px-3 py-1 disabled text-muted" href="#">
            {% trans "التقارير" %}
          </a>
        </li>

        {# 6. إجراءات سريعة (أقصى اليمين) #}
        <li class="nav-item dropdown ms-lg-auto">
          <a class="btn btn-primary btn-sm px-3 py-1 dropdown-toggle shadow-sm"
             data-bs-toggle="dropdown" href="#" role="button">
            <i class="bi bi-plus-lg"></i> {% trans "إجراء سريع" %}
          </a>
          <ul class="dropdown-menu dropdown-menu-end shadow-sm border-0">
            <li>
                <h6 class="dropdown-header text-uppercase small">{% trans "إنشاء مستند جديد" %}</h6>
            </li>
            <li>
              <a class="dropdown-item d-flex align-items-center" href="{% url 'sales:quotation_create' %}">
                <i class="bi bi-file-earmark-plus text-primary me-2"></i>
                {% trans "عرض سعر" %}
              </a>
            </li>
            <li>
              <a class="dropdown-item d-flex align-items-center" href="{% url 'sales:order_create' %}">
                <i class="bi bi-cart-plus text-success me-2"></i>
                {% trans "أمر بيع" %}
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a class="dropdown-item d-flex align-items-center" href="{% url 'sales:delivery_create' %}">
                <i class="bi bi-truck text-info me-2"></i>
                {% trans "مذكرة تسليم" %}
              </a>
            </li>
          </ul>
        </li>

      </ul>
    </div>
  </div>

  {# ======================= SALES CONTENT ======================= #}
  <div>
    {% block sales_content %}{% endblock %}
  </div>

</div>

{% endblock %}