{% extends "ledger/base_ledger.html" %}
{% load i18n %}

{% block ledger_content %}
<div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
  <h2 class="h5 mb-0">{% trans "دليل الحسابات" %}</h2>

  <div class="d-flex flex-wrap gap-2">
    <a href="{% url 'ledger:chart_of_accounts_export' %}"
       class="btn btn-sm btn-outline-secondary">
      {% trans "تصدير لإكسل" %}
    </a>
    <a href="{% url 'ledger:chart_of_accounts_import' %}"
       class="btn btn-sm btn-outline-primary">
      {% trans "استيراد من إكسل" %}
    </a>
    <a href="{% url 'ledger:account_create' %}" class="btn btn-primary btn-sm">
      + {% trans "حساب جديد" %}
    </a>
  </div>
</div>

<div class="card shadow-sm border-0">
  <div class="card-body">

    <div class="table-responsive">
      <table class="table table-sm table-striped align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th style="width: 10%">{% trans "الكود" %}</th>
            <th style="width: 30%">{% trans "اسم الحساب" %}</th>
            <th style="width: 20%">{% trans "النوع" %}</th>
            <th style="width: 25%">{% trans "الحساب الأب" %}</th>
            <th style="width: 15%"></th>
          </tr>
        </thead>
        <tbody>
        {% for account in accounts %}
          <tr>
            <td class="text-nowrap">
              {{ account.code }}
            </td>
            <td>
              {{ account.name }}
            </td>
            <td class="small">
              {{ account.get_type_display }}
            </td>
            <td class="small text-muted">
              {{ account.parent|default:"-" }}
            </td>
            <td class="text-end text-nowrap">
              <a href="{% url 'ledger:account_edit' account.pk %}"
                 class="btn btn-outline-secondary btn-sm">
                {% trans "تعديل" %}
              </a>
              {# رابط سريع لكشف حساب هذا الحساب #}
              <a href="{% url 'ledger:account_ledger' %}?account={{ account.pk }}"
                 class="btn btn-light btn-sm ms-1">
                {% trans "كشف حساب" %}
              </a>
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="5" class="text-center text-muted small py-3">
              {% trans "لا توجد حسابات حتى الآن." %}
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>

  </div>
</div>

{% endblock %}
