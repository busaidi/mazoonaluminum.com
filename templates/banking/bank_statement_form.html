{% extends "accounting/base_accounting.html" %}
{% load i18n %}

{% block title %}{{ title }}{% endblock %}

{% block accounting_content %}

<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <h2 class="h5 mb-1">{{ title }}</h2>
    <p class="text-muted small mb-0">{% trans "الرجاء التأكد من صحة الأرصدة قبل رفع الملف." %}</p>
  </div>
  <a href="{% url 'banking:bank_statement_list' %}" class="btn btn-sm btn-outline-secondary">
    {% trans "رجوع للقائمة" %}
  </a>
</div>

<form method="post" enctype="multipart/form-data" class="card card-body shadow-sm border-0">
  {% csrf_token %}
  
  {% if form.non_field_errors %}
  <div class="alert alert-danger" role="alert">
      {{ form.non_field_errors }}
  </div>
  {% endif %}

  <div class="row g-3">
    <div class="col-md-6">
      <label class="form-label">{{ form.bank_account.label }}</label>
      {{ form.bank_account }}
      {{ form.bank_account.errors }}
    </div>
    <div class="col-md-6">
      <label class="form-label">{{ form.name.label }}</label>
      {{ form.name }}
      <div class="form-text">{{ form.name.help_text }}</div>
      {{ form.name.errors }}
    </div>

    <hr class="my-4">

    <div class="col-md-4">
      <label class="form-label">{{ form.date.label }}</label>
      {{ form.date }}
      {{ form.date.errors }}
    </div>
    <div class="col-md-4">
      <label class="form-label">{{ form.start_balance.label }}</label>
      {{ form.start_balance }}
      {{ form.start_balance.errors }}
    </div>
    <div class="col-md-4">
      <label class="form-label">{{ form.end_balance.label }}</label>
      {{ form.end_balance }}
      {{ form.end_balance.errors }}
    </div>

    <hr class="my-4">

    <div class="col-12">
      <label class="form-label fw-bold">{{ form.imported_file.label }}</label>
      {{ form.imported_file }}
      <div class="form-text">
        {% trans "الملفات المدعومة: Excel (.xlsx, .xls) أو CSV. يجب أن يحتوي الملف على الأعمدة (التاريخ، الوصف، المبلغ)." %}
      </div>
      {{ form.imported_file.errors }}
    </div>
  </div>

  <div class="mt-4 d-flex justify-content-end gap-2">
    <a href="{% url 'banking:bank_statement_list' %}" class="btn btn-sm btn-outline-secondary">
      {% trans "إلغاء" %}
    </a>
    <button type="submit" class="btn btn-sm btn-primary px-4">
      <i class="bi bi-save"></i> {% trans "حفظ ومعالجة الكشف" %}
    </button>
  </div>
</form>
{% endblock %}