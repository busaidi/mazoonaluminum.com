{% extends "inventory/base_inventory.html" %}
{% load i18n %}

{% block title %}{% trans "فئة المنتج" %}{% endblock %}

{% block inventory_content %}

{# هيدر الشاشة – Mazoon #}
<div class="card border-0 shadow-sm mb-3 bg-mazoon-card">
  <div class="card-body d-flex justify-content-between align-items-center gap-3">
    <div>
      <h1 class="h5 fw-bold mb-1 text-mazoon">
        {% if mode == "create" %}
          {% trans "إضافة فئة جديدة" %}
        {% else %}
          {% trans "تعديل فئة المنتج" %}
        {% endif %}
      </h1>
      <p class="text-muted small mb-0">
        {% trans "استخدم الفئات لتنظيم المنتجات في مجموعات رئيسية وفرعية." %}
      </p>
    </div>

    <div class="d-flex flex-wrap gap-2">
      <a href="{% url 'inventory:category_list' %}"
         class="btn btn-sm btn-outline-secondary">
        <i class="bi bi-arrow-right-short ms-1"></i>
        {% trans "رجوع لقائمة الفئات" %}
      </a>
    </div>
  </div>
</div>

<div class="card border-0 shadow-sm">
  <div class="card-body">

    <form method="post" class="row g-3">
      {% csrf_token %}

      {# أخطاء عامة على مستوى الفورم #}
      {% if form.non_field_errors %}
        <div class="col-12">
          <div class="alert alert-danger small">
            {% for error in form.non_field_errors %}
              <div>{{ error }}</div>
            {% endfor %}
          </div>
        </div>
      {% endif %}

      {# الحقول – نوزعها تلقائياً في عمودين كما في الأصل #}
      {% for field in form %}
        <div class="col-md-6">
          <label for="{{ field.id_for_label }}" class="form-label small fw-semibold">
            {{ field.label }}
          </label>
          {{ field }}
          {% if field.help_text %}
            <div class="form-text small">{{ field.help_text }}</div>
          {% endif %}
          {% for error in field.errors %}
            <div class="text-danger small">{{ error }}</div>
          {% endfor %}
        </div>
      {% endfor %}

      <div class="col-12 d-flex justify-content-between align-items-center mt-2">
        <div class="text-muted small">
          {% trans "يمكن ربط فئة أب لإنشاء هيكل هرمي للفئات (رئيسية ← فرعية)." %}
        </div>
        <div class="d-flex gap-2">
          <a href="{% url 'inventory:category_list' %}"
             class="btn btn-outline-secondary">
            {% trans "إلغاء" %}
          </a>
          <button class="btn btn-primary">
            <i class="bi bi-check2-circle ms-1"></i>
            {% trans "حفظ" %}
          </button>
        </div>
      </div>

    </form>

  </div>
</div>

{% endblock %}
