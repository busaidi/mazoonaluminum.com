{% extends "base.html" %}
{% load i18n %}

{% block meta_title %}إنشاء طلب جديد (من الموظف) | Mazoon Aluminum{% endblock %}
{% block meta_description %}
إنشاء طلب جديد للعميل من قبل الموظف مع اختيار الزبون والمنتج والكمية وإضافة ملاحظات.
{% endblock %}

{% block content %}
<div class="py-4">

  <div class="d-flex flex-wrap justify-content-between align-items-center mb-3 gap-2">
    <h1 class="h4 mb-0">إنشاء طلب جديد (من الموظف)</h1>
    <a href="{% url 'accounting:order_list' %}" class="btn btn-secondary btn-sm">
      رجوع إلى قائمة الطلبات
    </a>
  </div>

  {% get_current_language as LANGUAGE_CODE %}

  <div class="card border-0 shadow-sm">
    <div class="card-body">
      <form method="post" novalidate>
        {% csrf_token %}

        <div class="mb-3">
          <label class="form-label">الزبون</label>
          <select name="customer" class="form-select" required>
            <option value="">اختر الزبون</option>
            {% for c in customers %}
              <option value="{{ c.id }}">{{ c.name }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">المنتج</label>
          <select name="product" class="form-select" required>
            <option value="">اختر المنتج</option>
            {% for p in products %}
              <option value="{{ p.id }}">
                {% if LANGUAGE_CODE == "ar" %}
                  {{ p.name_ar }}
                {% else %}
                  {{ p.name_en }}
                {% endif %}
                – {{ p.price }} ر.ع
              </option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">الكمية</label>
          <input type="number"
                 name="quantity"
                 class="form-control"
                 value="1"
                 min="0.01"
                 step="0.01"
                 required>
        </div>

        <div class="mb-3">
          <label class="form-label">ملاحظات</label>
          <textarea name="notes" class="form-control" rows="3"></textarea>
        </div>

        <div class="d-flex gap-2">
          <button class="btn btn-primary">حفظ كمسودة</button>

          <a href="{% url 'accounting:order_list' %}"
             class="btn btn-outline-secondary">
            إلغاء والعودة لقائمة الطلبات
          </a>
        </div>
      </form>
    </div>
  </div>

</div>
{% endblock %}
