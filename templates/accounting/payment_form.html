{% extends "base.html" %}
{% load i18n %}

{% block meta_title %}{% trans "إضافة دفعة" %}{% endblock %}

{% block content %}
<div class="py-4">

  <div class="d-flex flex-wrap justify-content-between align-items-center mb-3 gap-2">
    <h1 class="h4 mb-0">{% trans "إضافة دفعة جديدة" %}</h1>
    <a href="{% url 'accounting:payment_list' %}" class="btn btn-outline-secondary btn-sm">
      {% trans "رجوع إلى الدفعات" %}
    </a>
  </div>

  <div class="card p-3">
    <form method="post" novalidate>
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="alert alert-danger">
          {{ form.non_field_errors }}
        </div>
      {% endif %}

      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">{{ form.customer.label }}</label>
          {{ form.customer }}
          {{ form.customer.errors }}
        </div>

        <div class="col-md-6">
          <label class="form-label">{{ form.invoice.label }}</label>
          {{ form.invoice }}
          <div class="form-text">
            {% trans "يمكن تركها فارغة لتكون دفعة عامة." %}
          </div>
          {{ form.invoice.errors }}
        </div>

        <div class="col-md-4">
          <label class="form-label">{{ form.date.label }}</label>
          {{ form.date }}
          {{ form.date.errors }}
        </div>

        <div class="col-md-4">
          <label class="form-label">{{ form.amount.label }}</label>
          {{ form.amount }}
          {{ form.amount.errors }}
        </div>

        <div class="col-md-4">
          <label class="form-label">{{ form.method.label }}</label>
          {{ form.method }}
          {{ form.method.errors }}
        </div>

        <div class="col-12">
          <label class="form-label">{{ form.notes.label }}</label>
          {{ form.notes }}
          {{ form.notes.errors }}
        </div>
      </div>

      <div class="mt-3 d-flex justify-content-end gap-2">
        <a href="{% url 'accounting:payment_list' %}" class="btn btn-outline-secondary">
          {% trans "إلغاء" %}
        </a>
        <button type="submit" class="btn btn-primary">
          {% trans "حفظ الدفعة" %}
        </button>
      </div>
    </form>
  </div>

</div>
{% endblock %}
