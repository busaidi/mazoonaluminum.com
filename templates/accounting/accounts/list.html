{% extends "accounting/base_accounting.html" %}
{% load i18n %}

{% block accounting_content %}

<div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
  <div>
    <h1 class="h5 fw-bold mb-1">{% trans "دليل الحسابات" %}</h1>
    <p class="text-muted small mb-0">
      {% trans "إدارة شجرة الحسابات الرئيسية وربطها بالتقارير المالية." %}
    </p>
  </div>

  <div class="d-flex flex-wrap gap-2">
    <a href="{% url 'accounting:chart_of_accounts_export' %}"
       class="btn btn-sm btn-outline-secondary">
      <i class="bi bi-file-earmark-spreadsheet"></i>
      {% trans "تصدير لإكسل" %}
    </a>

    <a href="{% url 'accounting:chart_of_accounts_import' %}"
       class="btn btn-sm btn-outline-primary">
      <i class="bi bi-upload"></i>
      {% trans "استيراد من إكسل" %}
    </a>

    <a href="{% url 'accounting:account_create' %}"
       class="btn btn-sm btn-primary">
      <i class="bi bi-plus-lg"></i>
      {% trans "حساب جديد" %}
    </a>
  </div>
</div>

<div class="card shadow-sm border-0">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-sm table-striped align-middle mb-0">
        <thead class="table-light small text-muted">
          <tr>
            <th style="width:10%">{% trans "الكود" %}</th>
            <th style="width:30%">{% trans "اسم الحساب" %}</th>
            <th style="width:20%">{% trans "النوع" %}</th>
            <th style="width:25%">{% trans "الحساب الأب" %}</th>
            <th style="width:15%" class="text-end"></th>
          </tr>
        </thead>
        <tbody>
        {% for account in accounts %}
          <tr>
            <td class="text-nowrap fw-semibold">
              {{ account.code }}
            </td>
            <td>{{ account.name }}</td>
            <td class="text-muted small">{{ account.get_type_display }}</td>
            <td class="text-muted small">{{ account.parent|default:"-" }}</td>

            <td class="text-end text-nowrap">

              <a href="{% url 'accounting:account_edit' account.pk %}"
                 class="btn btn-outline-secondary btn-sm">
                <i class="bi bi-pencil"></i>
                {% trans "تعديل" %}
              </a>

              <a href="{% url 'accounting:account_ledger' %}?account={{ account.pk }}"
                 class="btn btn-light btn-sm ms-1">
                <i class="bi bi-journal-text"></i>
                {% trans "كشف حساب" %}
              </a>

            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="5" class="text-center text-muted small py-3">
              {% trans "لا توجد حسابات حتى الآن." %}
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

{% endblock %}
