{% extends "base.html" %}
{% load i18n %}

{% block title %}ุชุตุงููู ุงูููุงูุฐ ูุงูุฃุจูุงุจ{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <h1 class="h4 mb-1">ุชุตุงููู ุงูููุงูุฐ ูุงูุฃุจูุงุจ (WindowCAD)</h1>
    <p class="text-muted small mb-0">
      ูุฐู ูุงุฆูุฉ ุจูู ุงูุชุตุงููู ุงูุชู ุชู ุฅูุดุงุคูุง ูู ุงูุฑุณู ุฃู ูู ุงูููุงุฐุฌ.
    </p>
  </div>
  <div class="d-flex gap-2">
    <a href="{% url 'windowcad:window_sketch' %}" class="btn btn-sm btn-primary">
      ๐๏ธ ุฑุณู ุชุตููู ุฌุฏูุฏ (Sketch)
    </a>
  </div>
</div>

<div class="card border-0 shadow-sm">
  <div class="card-body border-bottom">
    <form method="get" class="row g-2">
      <div class="col-md-4">
        <input type="text"
               name="q"
               value="{{ request.GET.q }}"
               class="form-control form-control-sm"
               placeholder="ุจุญุซ ุจุงูุงุณู...">
      </div>
      <div class="col-md-2">
        <button class="btn btn-sm btn-outline-secondary w-100" type="submit">
          ุจุญุซ
        </button>
      </div>
    </form>
  </div>
  <div class="table-responsive">
    <table class="table table-sm align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th style="width:60px;">#</th>
          <th>ุงูุงุณู</th>
          <th>ุงููุธุงู</th>
          <th>Frame</th>
          <th>ุงูุนุฑุถ (mm)</th>
          <th>ุงูุงุฑุชูุงุน (mm)</th>
          <th style="width:120px;"></th>
        </tr>
      </thead>
      <tbody>
        {% for w in windows %}
        <tr>
          <td class="text-muted small">{{ w.id }}</td>
          <td>{{ w.name }}</td>
          <td>{{ w.system.code }}</td>
          <td>{{ w.frame_profile.code }}</td>
          <td>{{ w.width_mm|floatformat:0 }}</td>
          <td>{{ w.height_mm|floatformat:0 }}</td>
          <td class="text-end">
            <a href="{% url 'windowcad:window_detail' w.pk %}"
               class="btn btn-sm btn-outline-secondary">
              ุนุฑุถ
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="7" class="text-center text-muted py-4">
            ูุง ุชูุฌุฏ ุชุตุงููู ุญุชู ุงูุขู. ุฌุฑูุจ ุฅูุดุงุก ุชุตููู ุฌุฏูุฏ ูู ุตูุญุฉ <strong>ุงูุฑุณู (Sketch)</strong>.
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% if is_paginated %}
  <div class="card-body border-top">
    <nav aria-label="pages">
      <ul class="pagination pagination-sm mb-0">
        {% if page_obj.has_previous %}
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.previous_page_number }}&q={{ request.GET.q }}">ุงูุณุงุจู</a>
          </li>
        {% endif %}
        <li class="page-item disabled">
          <span class="page-link">
            ุตูุญุฉ {{ page_obj.number }} ูู {{ page_obj.paginator.num_pages }}
          </span>
        </li>
        {% if page_obj.has_next %}
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.next_page_number }}&q={{ request.GET.q }}">ุงูุชุงูู</a>
          </li>
        {% endif %}
      </ul>
    </nav>
  </div>
  {% endif %}
</div>
{% endblock %}
